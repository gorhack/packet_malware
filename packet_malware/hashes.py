# http://stackoverflow.com/a/22058673/1203147

import hashlib

# BUF_SIZE is totally arbitrary, change for your app!
BUF_SIZE = 65536  # lets read stuff in 64kb chunks!

md5 = hashlib.md5()
sha1 = hashlib.sha1()

def hash_file(file):  # file as BytesIO
    with file as f:
        while True:
            data = f.read(BUF_SIZE)
            if not data:
                break
            md5.update(data)
            sha1.update(data)

    print("MD5: {0}".format(md5.hexdigest()))
    print("SHA1: {0}".format(sha1.hexdigest()))

if __name__ == '__main__':
    """
    Detect the hash of the provided file.
    python3 -m hashes [file]
    """
    import sys
    with open(sys.argv[1], 'rb') as fi:
        hash_file(fi)
